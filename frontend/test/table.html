<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <script>
    function getIds(checkboxes, isChecked) {
      var length = checkboxes.length;
      var ids = [];
      for (var i = 0; i < length; i++) {
        var box = checkboxes.item(i);
        box.checked = isChecked;
        if (isChecked) {
          var id = box.dataset['id'];
          ids.push(id);
        }
      }
      return ids;
    }

    function selectAllOrNot() {
      let headerCheckbox = document.getElementById('header-checkbox');
      let checkboxes = document.getElementsByClassName('checkbox');
      let ids = getIds(checkboxes, headerCheckbox.checked);
      console.log('ids:', ids);
    }
  </script>
</head>

<body>
  <table border="1">
    <tbody>
      <tr>
        <th>
          <input id="header-checkbox" type="checkbox" onclick="selectAllOrNot()" />
        </th>
        <th>姓名</th>
        <th>年龄</th>
      </tr>
      <tr>
        <td>
          <input class="checkbox" type="checkbox" data-id="1" />
        </td>
        <td>Peter</td>
        <td>25</td>
      </tr>
      <tr>
        <td>
          <input class="checkbox" type="checkbox" data-id="2" />
        </td>
        <td>SiYuan</td>
        <td>25</td>
      </tr>
    </tbody>
  </table>
</body>

</html>